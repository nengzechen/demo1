# Play Framework ç”¨æˆ·æƒé™ç®¡ç†ç³»ç»Ÿ APIè®¾è®¡æ–‡æ¡£

## ğŸ“‹ ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [åŸºç¡€ä¿¡æ¯](#åŸºç¡€ä¿¡æ¯)
3. [é€šç”¨è¯´æ˜](#é€šç”¨è¯´æ˜)
4. [ç”¨æˆ·ç®¡ç†API](#ç”¨æˆ·ç®¡ç†api)
5. [è§’è‰²ç®¡ç†API](#è§’è‰²ç®¡ç†api)
6. [æƒé™ç®¡ç†API](#æƒé™ç®¡ç†api)
7. [é”™è¯¯ç å®šä¹‰](#é”™è¯¯ç å®šä¹‰)

---

## æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº†åŸºäºPlay Frameworkå¼€å‘çš„ç”¨æˆ·æƒé™ç®¡ç†ç³»ç»ŸRESTful APIæ¥å£è§„èŒƒã€‚

### ç‰ˆæœ¬ä¿¡æ¯

- **ç‰ˆæœ¬**: v1.0.0
- **æ¡†æ¶**: Play Framework 2.9.x
- **æ›´æ–°æ—¥æœŸ**: 2026-01-22

---

## åŸºç¡€ä¿¡æ¯

### æœåŠ¡åœ°å€

- **å¼€å‘ç¯å¢ƒ**: `http://localhost:9000`
- **æµ‹è¯•ç¯å¢ƒ**: `http://test-server:9000`
- **ç”Ÿäº§ç¯å¢ƒ**: `http://api.example.com`

### åè®®

- **HTTPåè®®**: HTTP/1.1
- **ç¼–ç æ ¼å¼**: UTF-8
- **æ•°æ®æ ¼å¼**: JSON

---

## é€šç”¨è¯´æ˜

### è¯·æ±‚å¤´

æ‰€æœ‰è¯·æ±‚åº”åŒ…å«ä»¥ä¸‹è¯·æ±‚å¤´ï¼š

```
Content-Type: application/json
Accept: application/json
```

### ç»Ÿä¸€å“åº”æ ¼å¼

æ‰€æœ‰APIå“åº”éƒ½éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {},
  "timestamp": "2026-01-22T10:30:00"
}
```

**å­—æ®µè¯´æ˜**ï¼š

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| code | Integer | çŠ¶æ€ç  |
| message | String | å“åº”æ¶ˆæ¯ |
| data | Object | å“åº”æ•°æ® |
| timestamp | String | å“åº”æ—¶é—´æˆ³ |

### åˆ†é¡µå“åº”æ ¼å¼

åˆ†é¡µæŸ¥è¯¢çš„å“åº”æ ¼å¼ï¼š

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "content": [],
    "pageNumber": 0,
    "pageSize": 10,
    "totalElements": 100,
    "totalPages": 10,
    "last": false,
    "first": true
  },
  "timestamp": "2026-01-22T10:30:00"
}
```

### åˆ†é¡µå‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| page | Integer | å¦ | 0 | é¡µç ï¼Œä»0å¼€å§‹ |
| size | Integer | å¦ | 10 | æ¯é¡µå¤§å° |

---

## ç”¨æˆ·ç®¡ç†API

### 1. åˆ›å»ºç”¨æˆ·

**æ¥å£æè¿°**: åˆ›å»ºæ–°ç”¨æˆ·

**è¯·æ±‚æ–¹å¼**: `POST`

**æ¥å£è·¯å¾„**: `/api/management/users`

**è¯·æ±‚å‚æ•°**:

```json
{
  "username": "testuser",
  "password": "password123",
  "email": "test@example.com",
  "phone": "13800138000",
  "realName": "æµ‹è¯•ç”¨æˆ·",
  "roleIds": [1, 2]
}
```

**å‚æ•°è¯´æ˜**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ | éªŒè¯è§„åˆ™ |
|------|------|------|------|----------|
| username | String | æ˜¯ | ç”¨æˆ·å | 3-50å­—ç¬¦ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ |
| password | String | æ˜¯ | å¯†ç  | 6-20å­—ç¬¦ |
| email | String | æ˜¯ | é‚®ç®± | æœ‰æ•ˆçš„é‚®ç®±æ ¼å¼ |
| phone | String | å¦ | æ‰‹æœºå· | 11ä½æ•°å­—ï¼Œ1å¼€å¤´ |
| realName | String | å¦ | çœŸå®å§“å | æœ€å¤š50å­—ç¬¦ |
| roleIds | Array | å¦ | è§’è‰²IDåˆ—è¡¨ | Longç±»å‹æ•°ç»„ |

**å“åº”ç¤ºä¾‹**:

```json
{
  "code": 200,
  "message": "ç”¨æˆ·åˆ›å»ºæˆåŠŸ",
  "data": {
    "id": 1,
    "username": "testuser",
    "email": "test@example.com",
    "phone": "13800138000",
    "realName": "æµ‹è¯•ç”¨æˆ·",
    "enabled": true,
    "locked": false,
    "createdAt": "2026-01-22T10:30:00",
    "updatedAt": "2026-01-22T10:30:00",
    "roles": []
  },
  "timestamp": "2026-01-22T10:30:00"
}
```

---

### 2. è·å–ç”¨æˆ·è¯¦æƒ…

**æ¥å£æè¿°**: æ ¹æ®IDè·å–ç”¨æˆ·è¯¦æƒ…

**è¯·æ±‚æ–¹å¼**: `GET`

**æ¥å£è·¯å¾„**: `/api/management/users/{id}`

**è·¯å¾„å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| id | Long | æ˜¯ | ç”¨æˆ·ID |

**å“åº”ç¤ºä¾‹**: åŒåˆ›å»ºç”¨æˆ·å“åº”

---

### 3. æ ¹æ®ç”¨æˆ·åè·å–ç”¨æˆ·

**æ¥å£æè¿°**: æ ¹æ®ç”¨æˆ·åè·å–ç”¨æˆ·ä¿¡æ¯

**è¯·æ±‚æ–¹å¼**: `GET`

**æ¥å£è·¯å¾„**: `/api/management/users/username/{username}`

**è·¯å¾„å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| username | String | æ˜¯ | ç”¨æˆ·å |

---

### 4. è·å–ç”¨æˆ·åˆ—è¡¨

**æ¥å£æè¿°**: åˆ†é¡µè·å–ç”¨æˆ·åˆ—è¡¨

**è¯·æ±‚æ–¹å¼**: `GET`

**æ¥å£è·¯å¾„**: `/api/management/users`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| page | Integer | å¦ | 0 | é¡µç  |
| size | Integer | å¦ | 10 | æ¯é¡µå¤§å° |

---

### 5. æœç´¢ç”¨æˆ·

**æ¥å£æè¿°**: æ ¹æ®å…³é”®è¯æœç´¢ç”¨æˆ·

**è¯·æ±‚æ–¹å¼**: `GET`

**æ¥å£è·¯å¾„**: `/api/management/users/search`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| keyword | String | æ˜¯ | æœç´¢å…³é”®è¯ |
| page | Integer | å¦ | é¡µç  |
| size | Integer | å¦ | æ¯é¡µå¤§å° |

---

### 6. æ ¹æ®çŠ¶æ€æŸ¥è¯¢ç”¨æˆ·

**æ¥å£æè¿°**: æ ¹æ®å¯ç”¨çŠ¶æ€æŸ¥è¯¢ç”¨æˆ·

**è¯·æ±‚æ–¹å¼**: `GET`

**æ¥å£è·¯å¾„**: `/api/management/users/by-status`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| enabled | Boolean | æ˜¯ | å¯ç”¨çŠ¶æ€ |
| page | Integer | å¦ | é¡µç  |
| size | Integer | å¦ | æ¯é¡µå¤§å° |

---

### 7. æ›´æ–°ç”¨æˆ·

**æ¥å£æè¿°**: æ ¹æ®IDæ›´æ–°ç”¨æˆ·ä¿¡æ¯

**è¯·æ±‚æ–¹å¼**: `PUT`

**æ¥å£è·¯å¾„**: `/api/management/users/{id}`

**è·¯å¾„å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| id | Long | æ˜¯ | ç”¨æˆ·ID |

**è¯·æ±‚å‚æ•°**:

```json
{
  "password": "newpassword123",
  "email": "newemail@example.com",
  "phone": "13900139000",
  "realName": "æ–°åå­—",
  "enabled": true,
  "locked": false,
  "roleIds": [1, 2, 3]
}
```

---

### 8. åˆ é™¤ç”¨æˆ·

**æ¥å£æè¿°**: æ ¹æ®IDåˆ é™¤ç”¨æˆ·

**è¯·æ±‚æ–¹å¼**: `DELETE`

**æ¥å£è·¯å¾„**: `/api/management/users/{id}`

**å“åº”ç¤ºä¾‹**:

```json
{
  "code": 200,
  "message": "ç”¨æˆ·åˆ é™¤æˆåŠŸ",
  "data": null,
  "timestamp": "2026-01-22T10:36:00"
}
```

---

### 9. æ‰¹é‡åˆ é™¤ç”¨æˆ·

**æ¥å£æè¿°**: æ ¹æ®IDåˆ—è¡¨æ‰¹é‡åˆ é™¤ç”¨æˆ·

**è¯·æ±‚æ–¹å¼**: `DELETE`

**æ¥å£è·¯å¾„**: `/api/management/users/batch`

**è¯·æ±‚å‚æ•°**:

```json
[1, 2, 3, 4, 5]
```

---

## è§’è‰²ç®¡ç†API

### 1. åˆ›å»ºè§’è‰²

**æ¥å£æè¿°**: åˆ›å»ºæ–°è§’è‰²

**è¯·æ±‚æ–¹å¼**: `POST`

**æ¥å£è·¯å¾„**: `/api/management/roles`

**è¯·æ±‚å‚æ•°**:

```json
{
  "name": "ç®¡ç†å‘˜",
  "code": "ADMIN",
  "description": "ç³»ç»Ÿç®¡ç†å‘˜è§’è‰²",
  "permissionIds": [1, 2, 3]
}
```

**å‚æ•°è¯´æ˜**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ | éªŒè¯è§„åˆ™ |
|------|------|------|------|----------|
| name | String | æ˜¯ | è§’è‰²åç§° | 2-50å­—ç¬¦ |
| code | String | æ˜¯ | è§’è‰²ç¼–ç  | 2-50å­—ç¬¦ï¼Œåªèƒ½åŒ…å«å¤§å†™å­—æ¯å’Œä¸‹åˆ’çº¿ |
| description | String | å¦ | æè¿° | æœ€å¤š200å­—ç¬¦ |
| permissionIds | Array | å¦ | æƒé™IDåˆ—è¡¨ | Longç±»å‹æ•°ç»„ |

---

### 2. è·å–è§’è‰²è¯¦æƒ…

**æ¥å£æè¿°**: æ ¹æ®IDè·å–è§’è‰²è¯¦æƒ…

**è¯·æ±‚æ–¹å¼**: `GET`

**æ¥å£è·¯å¾„**: `/api/management/roles/{id}`

---

### 3. æ ¹æ®ç¼–ç è·å–è§’è‰²

**æ¥å£æè¿°**: æ ¹æ®è§’è‰²ç¼–ç è·å–è§’è‰²ä¿¡æ¯

**è¯·æ±‚æ–¹å¼**: `GET`

**æ¥å£è·¯å¾„**: `/api/management/roles/code/{code}`

---

### 4. è·å–è§’è‰²åˆ—è¡¨

**æ¥å£æè¿°**: åˆ†é¡µè·å–è§’è‰²åˆ—è¡¨

**è¯·æ±‚æ–¹å¼**: `GET`

**æ¥å£è·¯å¾„**: `/api/management/roles`

---

### 5. æœç´¢è§’è‰²

**æ¥å£æè¿°**: æ ¹æ®å…³é”®è¯æœç´¢è§’è‰²

**è¯·æ±‚æ–¹å¼**: `GET`

**æ¥å£è·¯å¾„**: `/api/management/roles/search`

---

### 6. æ›´æ–°è§’è‰²

**æ¥å£æè¿°**: æ ¹æ®IDæ›´æ–°è§’è‰²ä¿¡æ¯

**è¯·æ±‚æ–¹å¼**: `PUT`

**æ¥å£è·¯å¾„**: `/api/management/roles/{id}`

---

### 7. åˆ é™¤è§’è‰²

**æ¥å£æè¿°**: æ ¹æ®IDåˆ é™¤è§’è‰²

**è¯·æ±‚æ–¹å¼**: `DELETE`

**æ¥å£è·¯å¾„**: `/api/management/roles/{id}`

---

### 8. æ‰¹é‡åˆ é™¤è§’è‰²

**æ¥å£æè¿°**: æ ¹æ®IDåˆ—è¡¨æ‰¹é‡åˆ é™¤è§’è‰²

**è¯·æ±‚æ–¹å¼**: `DELETE`

**æ¥å£è·¯å¾„**: `/api/management/roles/batch`

---

## æƒé™ç®¡ç†API

### 1. åˆ›å»ºæƒé™

**æ¥å£æè¿°**: åˆ›å»ºæ–°æƒé™

**è¯·æ±‚æ–¹å¼**: `POST`

**æ¥å£è·¯å¾„**: `/api/management/permissions`

**è¯·æ±‚å‚æ•°**:

```json
{
  "name": "ç”¨æˆ·æŸ¥çœ‹",
  "code": "USER:READ",
  "description": "æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯çš„æƒé™",
  "resource": "user",
  "action": "READ"
}
```

**å‚æ•°è¯´æ˜**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ | éªŒè¯è§„åˆ™ |
|------|------|------|------|----------|
| name | String | æ˜¯ | æƒé™åç§° | 2-50å­—ç¬¦ |
| code | String | æ˜¯ | æƒé™ç¼–ç  | 2-100å­—ç¬¦ï¼Œåªèƒ½åŒ…å«å¤§å†™å­—æ¯ã€ä¸‹åˆ’çº¿å’Œå†’å· |
| description | String | å¦ | æè¿° | æœ€å¤š200å­—ç¬¦ |
| resource | String | æ˜¯ | èµ„æº | æœ€å¤š50å­—ç¬¦ |
| action | String | æ˜¯ | æ“ä½œ | CREATEã€READã€UPDATEã€DELETEæˆ–ALL |

---

### 2-8. å…¶ä»–æƒé™ç®¡ç†æ¥å£

ç±»ä¼¼ç”¨æˆ·å’Œè§’è‰²ç®¡ç†ï¼ŒåŒ…æ‹¬ï¼š
- è·å–æƒé™è¯¦æƒ…
- æ ¹æ®ç¼–ç è·å–æƒé™
- è·å–æƒé™åˆ—è¡¨
- æœç´¢æƒé™
- æ ¹æ®èµ„æºæŸ¥è¯¢æƒé™
- æ›´æ–°æƒé™
- åˆ é™¤æƒé™
- æ‰¹é‡åˆ é™¤æƒé™

---

## é”™è¯¯ç å®šä¹‰

### HTTPçŠ¶æ€ç 

| çŠ¶æ€ç  | è¯´æ˜ |
|--------|------|
| 200 | æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 404 | èµ„æºæœªæ‰¾åˆ° |
| 409 | èµ„æºå·²å­˜åœ¨ï¼ˆå†²çªï¼‰ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

### ä¸šåŠ¡é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|
| 200 | æ“ä½œæˆåŠŸ | æ“ä½œæˆåŠŸ |
| 400 | å‚æ•°éªŒè¯å¤±è´¥ | ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-50ä¹‹é—´ |
| 404 | èµ„æºæœªæ‰¾åˆ° | ç”¨æˆ·æœªæ‰¾åˆ°: id = 123 |
| 409 | èµ„æºå·²å­˜åœ¨ | ç”¨æˆ·å·²å­˜åœ¨: username = testuser |
| 500 | ç³»ç»Ÿå†…éƒ¨é”™è¯¯ | ç³»ç»Ÿå†…éƒ¨é”™è¯¯: æ•°æ®åº“è¿æ¥å¤±è´¥ |

---

## é™„å½•

### å¿«é€Ÿå¼€å§‹

1. **å¯åŠ¨é¡¹ç›®**:
```bash
cd play-demo
sbt run
```

2. **è®¿é—®API**: http://localhost:9000

3. **æµ‹è¯•API**: ä½¿ç”¨Postmanæˆ–curl

### ç¤ºä¾‹å‘½ä»¤

```bash
# åˆ›å»ºç”¨æˆ·
curl -X POST http://localhost:9000/api/management/users \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","password":"password123","email":"test@example.com"}'

# è·å–ç”¨æˆ·åˆ—è¡¨
curl http://localhost:9000/api/management/users?page=0&size=10
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2026-01-22
